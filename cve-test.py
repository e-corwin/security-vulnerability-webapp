import requests
import json
from datetime import datetime
import pytz

time_us_central = datetime.now(pytz.timezone('US/Central'))
print('US Central DateTime: ', time_us_central)

iso_datetime = time_us_central.isoformat()
print('ISO Datetime', iso_datetime)

url = 'https://services.nvd.nist.gov/rest/json/source/2.0/?lastModStartDate=2021-08-04T13:00:00.000%2B01:00&lastModEndDate=2021-10-22T13:36:00.000%2B01:00'

parameters = {'apiKey': '69e1fdb2-41e3-457e-8f92-f1c6cc22eb64', 'startIndex': 0}
cve_api = requests.get(url, params=parameters)
print(cve_api.text)
'''
resultsPerPage = 
totalResults = 
while resultsPerPage <= totalResults:


# Full list of CVEs
# cve_api = requests.get('https://cve.circl.lu/api/last')
# cve_data = json.loads(cve_api.content)
# print(cve_API.status_code) # returns 200 means that it is working!
# print(cve_api.text)

# with open(f"cve_data.json", "w") as outfile:
    # json.dump(cve_data, outfile, indent = 2)

cve_data = json.loads(cve_api.content)


with open(f"cve-data.json", "w") as outfile:
    json.dump(cve_data, outfile, indent = 2)


# Finding Today's Date
todays_date = date.today()
print("Today's Date: " , todays_date)
str(todays_date)
'''
